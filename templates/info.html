{% extends 'base.html' %}
{% block title %}Happy Snacky{% endblock %}

{% block head%} 
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@3.5.1/dist/chart.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/luxon@2.0.2/build/global/luxon.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.1.0/dist/chartjs-adapter-luxon.min.js"></script>

  <script src="https://cdn.jsdelivr.net/npm/randomcolor@0.6.2/randomColor.js"></script>

   {% endblock %}

{% block body %}

      <br>

    {% if data%}    

       <!-- GREEN SAVE BUTTON/SAFE LIST  -->
        <form action="/savesnacks" method="POST">
        
        <input type="hidden" value="{{data['title']}}" name="title" >
        <input type="hidden" value="{{data['image']}}" name="image">
        <button class="a btn btn-success" type="submit" name="saves"><i class="bi bi-bookmark-heart-fill"></i> | Save </button>

        </form>



        <!-- DATA PRODUCT INFO -->    
        <input type="hidden" value="{{data['id']}}" name="title" id="product-id" >
        <div id="products">
            <div id="title-products"><h4>{{data['title']}}</h4><br></div>
                <div id="image-products"><img src="{{data['image']}}"><br></div> 
                    <div id="info-products" >
                        <h5>Ingredients:
                            {% for ingredient in data['ingredients']%}
                            
                            <span data-bs-placement="top" data-bs-title="Tooltip on top" id="info-product" value="{{ingredient.safety_level}}" 
                            title="This ingredient is part of your dietary restrictions">{{ingredient.name}}</span>
                                {% if not loop.last %}
                                <span>,</span>
                                {% endif %}
                                {% endfor %} 
                                {% endif %}
                                </h5>
                                </div>

                                <h5><div id="badges">
                                    <i class="bi bi-info-square-fill" style="color:rgb(61, 216, 61)"></i> This product should be
                                    {% for badge in data['importantBadges'] %}

                                        {{badge | replace("_", " ") }}

                                      {% if not loop.last %}
                                        <span>,</span>
                                        {% endif %}
                                    {% endfor %}
                                 
                                    </div>
                                </h5> 
                                     <!-- NUTRICIONAL INFO DATA JS CHART/ TABLE-->    
                                    <br><p><h4>Nutricional Information</h4></p>

                              

                                    <div  style="width:30%"> 
                                    <canvas id="myChart" ></canvas>

                                </div>
                                <div class="table-nutrients">
                                  <h4>Nutrients Table</h4>
                                <table style="border: 1px solid black; border-collapse: collapse;">
                                  <tr>
                                    <th style="border: 1px solid black; padding: 5px;">Nutrient</th>
                                    <th style="border: 1px solid black; padding: 5px;">Amount</th>
                                  </tr>
                                  {% for nutrient in data['nutrition']['nutrients'] %}
                                    <tr>
                                      {% if nutrient['name'] == 'Calories' %}
                                        <td><strong>Calories</strong></td>
                                        <td>{{ nutrient['amount'] }}</td>
                                      {% endif %}
                                    </tr>
                                  {% endfor %}
                                  {% for nutrient in data['nutrition']['nutrients'] %}
                                    <tr style="border: 1px solid black; padding: 5px;">
                                      {% if nutrient['name'] != 'Calories' %}
                                        <td style="border: 1px solid black; padding: 5px;">{{ nutrient['name'] }}</td>
                                        <td style="border: 1px solid black; padding: 5px;">{{ nutrient['amount'] }}</td>
                                      {% endif %}
                                    </tr>
                                  {% endfor %}
                                </table>
                              </div>
                            </div>



  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="/static/js/main.js"></script>







{% endblock %}